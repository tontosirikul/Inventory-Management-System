{% load static %}

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<!-- Popper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

<!-- Icon -->
<!-- <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.7.0/css/all.css' integrity='sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ' crossorigin='anonymous'> -->

<!-- <meta name="format-detection" content="telephone=no"> -->

<script src="https://d3js.org/d3.v5.min.js"></script>


<title>RAI Laboratory</title>

<link rel="shortcut icon" 					 href="{% static 'rai_home/favicon/icon2/icon@32.ico' %}" />
<link rel="shortcut icon" type="image/png"	 href="{% static 'rai_home/favicon/icon2/icon@32.png' %}"/>
<link rel="apple-touch-icon" 				 href="{% static 'rai_home/favicon/icon2/icon@80.png' %}"/> <!-- iPhone -->
<link rel="apple-touch-icon" sizes="152x152" href="{% static 'rai_home/favicon/icon2/icon@152.png' %}"/> <!-- iPad -->
<link rel="apple-touch-icon" sizes="180x180" href="{% static 'rai_home/favicon/icon2/icon@180.png' %}"/> <!-- iPhone-retina -->
<link rel="apple-touch-icon" sizes="167x167" href="{% static 'rai_home/favicon/icon2/icon@167.png' %}"/> <!-- iPad-retina -->
<meta name="apple-mobile-web-app-title" content="RAI Lab">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="white">

<meta name="viewport" content="width=device-width">

<style>
	@font-face {
		font-family: Righteous; 
		src: url({% static 'rai_home/fonts/Righteous-Regular.ttf' %});
	}
	@font-face {
		font-family: FAqua; 
		src: url({% static 'rai_home/fonts/aqua.ttf' %});
	}

	body{
		font-family: Arial, Helvetica, sans-serif;
		background-color: #fff;
	}

	.rai-nav{
		width: 100%;
		display: block;
		position: absolute;
		padding: 4em 4.5em;
		font-size: 1em;
	}
	.rai-nav .rai-item{
		font-family: FAqua;
		float: right;
		cursor: pointer;
		color: #666;
		margin-left: 2em;
		text-transform: uppercase;
		letter-spacing: 0.1em;
	}
	.rai-nav .rai-title{
		font-family: FAqua;
		color: #333;
		font-weight: bold;
	}
	.rai-nav .rai-item-close{
		font-family: FAqua;
		float: right;
		cursor: pointer;
		color: #999;
		white-space: nowrap;
		margin-left: 2em;
	}

	.page1{
		width: 100%;
		top: 0em;
		display: block;
		/* position: fixed; */
		margin-bottom: 1.5em;
		padding-left: 1em;
		padding-right: 1em;
		padding-top: 3em;
	}
	.page1 .title{
		display: inline-block;
		font-size: 3em;
		/* line-height: 1.2em; */
		font-weight: bold;
		color: #333;
	}
	.page1 .title-sm{
		display: block;
		font-size: 1.2em;
		font-weight: bold;
		text-transform: uppercase;
		color: #aaa;
	}
	.page1 .title-icon{
		display: inline-block;
		width:  3.5em;
		height: 3.5em;
		/* margin-top: 0.8em; */
		border: solid #f5f5f5 2px;
		border-radius: 50%;
	}
	.page1 .title-icon:hover{
		cursor: pointer;
		opacity: 0.3;
	}
	.page1 .content{
		height: 40vw;
		width: 100%;
		margin-top: 1.5em;
		display: block;
		/* position: fixed; */
		background-color: #ccc;
		border-radius: 1.5em;
		overflow: hidden;
		padding: 0em;
	}
	.page1 .content .img-full{
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	.rai-link:hover{
		cursor: pointer;
		text-decoration: none;
		color: #36f;
	}

	.rai-text-large-1{
		font-family: FAqua;
		text-align: center;
		width: 100%;
		top: 45vh;
		position: absolute;
		color: #333;
		/* color: #fff; */
		/* font-size: 2.2em; */
		font-size: 6vmin;
	}
	.rai-text-large-2{
		font-family: FAqua;
		text-align: center;
		width: 100%;
		top: 53vh;
		position: absolute;
		color: #999;
		/* color: #fff; */
		/* font-size: 1.1em; */
		font-size: 3vmin;
	}
	.rai-widget-block{
		height: 88vh;
		width: 25vw;
		top: 3em;
		right: 2em;
		position: fixed;
		background-color: #eee;
		border-radius: 1em;
	}

	.rai-sticky-block{
		z-index: 1;
		margin: 0;
		position: -webkit-sticky;
		position: sticky;
		top: 0em;
		background-color: #fff;
		padding: 1em;
		margin-top: 2em;
	}
	.rai-sticky-block .rai-sticky-title{
		font-weight: bold;
		color: #222;
		margin-top: 0.1em;
		font-size: 1.8em;
	}


	.rai-main-container{
		display: block;
		top: 100vh;
		margin: 0em;
		min-height: 80vh;
		padding: 0em 10vw;
	}

	.rai-module-block{
		display: inline-block;
		border-radius: 0.75em;
		width: 31%;
		padding: 0.9em 1em;
		margin-right: 1em;
		border-radius: 0.75em;
	}
	.rai-module-block:hover{
		background-color: #f9f9f9;
		cursor: pointer;
	}
	.rai-module-block .body{
		display: flex;
		align-items: center;
	}
	.rai-module-block img{
		float: left;
		height: 5em;
		width:  5em;
		border-radius: 18%;
		border: solid #f2f2f2 2px;
	}
	.rai-module-block .content{
		padding-left: 0.8em;
		width: 80%;
	}
	.rai-module-block .title{
		font-weight: bold;
		color: #333;
		font-size: 1.1em;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}
	.rai-module-block .subtitle{
		width: 100%;
		font-size: 0.9em;
		line-height: 1.2em;
		color: #555;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}
	.rai-module-block .subtitle2{
		width: 100%;
		margin-top: 0.4em;
		font-size: 0.9em;
		color: #ccc;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		text-transform: capitalize;
	}

	.rai-footer{
		width: 100%;
		color: #ddd;
		text-align: center;
		padding: 3em;
		display: block;
		margin-bottom: 2em;
		font-size: 1em;
	}

	.widget-container{
		padding: 0em 1em;
	}
	.widget-extent-btn{
		color: #007bff;
		text-align: center;
		font-weight: bold;
		font-size: 1em;
		margin: auto;
		margin-top: 0.5em;
	}
	.widget-block{
		overflow: hidden;
		margin-right: 0.75%;
		margin-bottom: 1em;
		display: inline-block;
		width: 48.8%;
		height: 15em;
		background-color: #f7f7f7;
		border-radius: 0.8em;
	}
	.widget-block .header{
		width: 100%;
		width: 100%;
		padding: 0.5em;
		display: flex;
	}
	.widget-block .header .icon{
		border-radius: 20%;
		display: inline-block;
		height: 1.5em;
		width:  1.5em;
		border-radius: 20%;
	}
	.widget-block .header .title{
		width: 100%;
		/* font-weight: bold; */
		display: inline-block;
		position: relative;
		color: #aaa;
		font-size: 0.9em;
		line-height: 1.7em;
		left: 0.5em;
		text-transform: uppercase;
	}
	.widget-block .body{
		width: 100%;
		padding: 0.4em;
		display: flex;
	}

	@media screen and (max-width: 500px){ /* Mibile */
		.rai-nav{
			padding: 1em;
		}
		.rai-nav .rai-item .rai-name{
			display: none;
		}
		.rai-main-container{
			padding: 0em 0.5em;
		}
		.rai-module-block{
			width: 100%;
			padding: 1em 1em;
		}
		.page1{
			padding: 0.5em;
			padding-top: 1.5em;
		}
		.page1 .title{
			font-size: 2em;
		}
		.page1 .title-sm{
			font-size: 0.8em;
		}
		.page1 .title-icon{
			width:  2.8em;
			height: 2.8em;
			border: solid #f5f5f5 2px;
			border-radius: 50%;
		}
		.page1 .content{
			height: 15em;
			width: 100%;
			margin-top: 1em;
			border-radius: 0.8em;
		}

		.rai-sticky-block{
			margin:0.5em;
			padding: 0.5em 0em;
			border-top: solid 1px #e5e5e5;
		}
		.rai-sticky-block .rai-sticky-title{
			font-size: 1.3em;
		}

		.rai-module-block{
			border-radius: 0.75em;
			width: 100%;
			padding: 0em 0.5em;
			padding-bottom: 0.6em;
			margin: 0;	
			border-radius: 0.75em;
		}


		.widget-block{
			width: 100%;
			margin-right: 0.75%;
		}

		.rai-footer{
			padding: 1em;
			display: block;
			margin-bottom: 2em;
			font-size: 1em;
		}
	}
	@media screen and (min-width: 500px) and (max-width: 1000px){ /* Desktop medium width */
		.rai-nav{
			padding: 1em;
		}
		.rai-module-block{
			width: 45%;
		}
		.widget-block{
			width: 100%;
			margin-right: 0.75%;
		}
		.page1 .content{
			border-radius: 1em;
			height: 40vw;
		}
	}
</style>

<body class="p-0">
	<div class="rai-main-container">
		<div class="page1">
			<span class="title-sm">robotics and ai</span>
			<span class="title">Laboratory (v1.0)</span>
			<span onclick="goto('/authen/login');">
				{% if raiuser.image == '' or request.user.is_authenticated == False %}
				<img class="title-icon" src="{% static 'rai_home/images/user.png' %}" align="right">
				{% else %}
				<img class="title-icon" src="/media/{{raiuser.image}}" align="right">
				{% endif %}
			</span>
		</div>

		{% if widgets|length is not 0 %}
		<div class="rai-sticky-block"><div class="rai-sticky-title">Active Modules</div></div>
		<div class="widget-container">
			{% for i in widgets %}
			<div class="widget-block">
				<a class="rai-link" href="/modules/module_manager/">
					<div class="header">
						<img class="icon" src="{% static 'rai_home/images/module-icon-template.png' %}">
						<span class="title">Module{{i}} name</span>
					</div>
				</a>
				<div class="body">
				</div>
			</div>
			{% endfor %}
		</div>
		<div class="widget-extent-btn rai-link">Show Less</div>
		{% endif %}

		<div class="rai-sticky-block"><div class="rai-sticky-title">All Modules</div></div>
		{% for module in modules %}
			{% if module.is_show %}
			<!-- <a class="rai-link" href="/modules/{{module.path}}"> -->
				<div class="rai-module-block" onclick="goto('/modules/{{module.path}}');">
					<div class="body">
						{% if module.icon == '' %}
						<img src="{% static 'rai_home/images/module-icon-template.png' %}">
						{% else %}
						<img src="/media/{{module.icon}}">
						{% endif %}
						<div class="content">
							<div class="title">{{module.name}}</div>
							<div class="subtitle">{{module.description}}</div>
							<div class="subtitle2">
								{% if module.is_admin %}Admin â€“ {% endif %}
								{{module.accessibility_str}}
							</div>
						</div>
					</div>
				</div>
			<!-- </a> -->
			{% endif %}
		{% endfor %}
		<br><br>
	</div>
	
	<div class="rai-footer">
		Robotics and AI Laboratory 
		<br>
		King Mongkut's Institute of Technology Ladkrabang
	</div>
	
</body>

<script>
	function openMenu() {
		let screenWidth = window.innerWidth;
		if(screenWidth > 1000)
			document.getElementById("side-menu").style.width = screenWidth*0.25+'px';
		else
			document.getElementById("side-menu").style.width = screenWidth+'px';
	}
	function closeMenu() {
		document.getElementById("side-menu").style.width = "0";
	}

	function goto(url){ location.href = url; }

	// var innerW = window.innerWidth;
	// var innerH = window.innerHeight;
	// d3.select('#debug').text(innerW+" x "+innerH);

</script>

<!-- 
<script src="//d3js.org/d3.v3.min.js"></script>
<script>

var width = window.innerWidth,
	height = window.innerHeight;

var nodes = d3.range(500).map(function() { return {radius: Math.random() * 10 + 6}; }),
	root = nodes[0],
	// color = d3.scale.linear().domain([0,5]).range(['red', 'blue']);
	color = d3.scale.linear().domain([0,5]).range(['#ccc', '#000']);
	// color = d3.scale.category10();

root.radius = 0;
root.fixed = true;

var force = d3.layout.force()
	.gravity(0.01)
	.charge(function(d, i) { return i ? 0 : -2000; })
	.nodes(nodes)
	.size([width, height]);

force.start();

var svg = d3.select('#page1').append("svg")
	.attr("width", width)
	.attr("height", height);

svg.selectAll("circle")
	.data(nodes.slice(1))
	.enter().append("circle")
	.attr("r", function(d) { return d.radius; })
	.style("fill", function(d, i) { return color(i % 3); });

force.on("tick", function(e) {
	var q = d3.geom.quadtree(nodes),
		i = 0,
		n = nodes.length;

	while (++i < n) q.visit(collide(nodes[i]));

	svg.selectAll("circle")
		.attr("cx", function(d) { return d.x; })
		.attr("cy", function(d) { return d.y; });
});

svg.on("mousemove", function() {
	var p1 = d3.mouse(this);
	root.px = p1[0];
	root.py = p1[1];
	force.resume();
});

function collide(node) {
	var r = node.radius + 16,
		nx1 = node.x - r,
		nx2 = node.x + r,
		ny1 = node.y - r,
		ny2 = node.y + r;
	return function(quad, x1, y1, x2, y2) {
	if (quad.point && (quad.point !== node)) {
		var x = node.x - quad.point.x,
			y = node.y - quad.point.y,
			l = Math.sqrt(x * x + y * y),
			r = node.radius + quad.point.radius;
		if (l < r) {
		l = (l - r) / l * .5;
		node.x -= x *= l;
		node.y -= y *= l;
		quad.point.x += x;
		quad.point.y += y;
		}
	}
	return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;
	};
}

</script> -->

