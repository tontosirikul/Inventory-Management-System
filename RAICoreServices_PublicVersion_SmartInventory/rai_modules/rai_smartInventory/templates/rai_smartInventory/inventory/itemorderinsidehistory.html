{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style> 
      .bg-modal{
        width: 100%;
        height: 100%;
        background-color:rgba(0, 0, 0, 0.7);
        position: absolute;
        top: 0;
        display: none;
        justify-content: center;
        align-items: center;
      }
      .modal-content{
        width: 500px;
        height: 300px;
        background-color: white;
        border-radius: 10px;
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        align-items: center;
      }
      .group-text-pop{
        margin: 10px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
      }
      .danger-text{
        color: red;
      }
      .add{
        display: flex;
        flex-direction: row;
      }
      .add-1{
        margin-right: 5px;
      }
      .card-deck-1{
        display: flex;
        align-content: stretch;
        flex-direction: column;
        padding: 50px;
        /* min-height: 100vh; */
    }
      .card-1{
        padding:10px;
        margin: 10px;
        position: relative
    }
    .card-title-1{
        text-align: center;
    }
    .card-text-1{
        text-align: center;
    }
  </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <link rel="stylesheet" href="{% static 'rai_smartInventory/inventory/bootstrap-datetimepicker.min.css' %}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.21.0/moment.min.js" type="text/javascript"></script>
    <script src="{% static 'rai_smartInventory/inventory/bootstrap-datetimepicker.min.js' %}"></script>
  </head>

    
    <title>RAI Smart Inventory</title>
    <nav class="navbar navbar-light bg-light">
        <a class="navbar-brand" href="/modules/smart_inventory/admin/istory/requestlisthistory">
          <img src="{% static "rai_smartInventory/inventory/request.png" %}" width="30" height="30" class="d-inline-block align-top" alt="">
          Order {{order.id}} of {{order.owner}}
        </a>
        
    </nav>
 
<body>
    <div class="card-deck">
        {% for item in items %}
        {% if item.is_returned == False %}
        <div class="card">
          
          <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
          <!-- <img src="/media/{{item.product.image}}"  class="card-img-top" alt="..."> -->
          <div class="card-body">
            <h5 class="card-title">{{item.product.brand}}/{{item.product.series}}</h5>
            <select class="custom-select" name="which_serial" {% if item.is_approved != False %} disabled {% endif %}>
            
              {% if item.is_approved == False %}
              <option selected>Choose Serial Monitor</option>
              {% for itemisready in item.item_available %}
              
              <option value="{{itemisready.id}}"> {{ itemisready.serial }}</option>
              {% endfor %}

              {% else %}
              <option value="">{{ item.which_serial.serial }}</option>
              {% endif %}
              </select>

              
              {% if item.is_approved == False %}
              <input type='text' class="form-control" id='date' placeholder="Given date" name="given_date">
              
              <input type='text' class="form-control" id='date2' placeholder="Return date" name="return_date">
              <script>
                  $(function () {
                      // document.querySelectorAll('[id=date]').datetimepicker();
                      $('[id=date]').datetimepicker();
                      $('[id=date2]').datetimepicker();  
                  });
              </script>
              
              
              {% else %}
              <input type='text' class="form-control" id='date{{item.id}}' placeholder="" disabled>
                
              <input type='text' class="form-control" id='date2{{item.id}}'placeholder="" disabled>
              <script>
                document.getElementById('date{{item.id}}').placeholder = (new Date('{{item.given_date}}')).toLocaleString('en-GB');
                document.getElementById('date2{{item.id}}').placeholder = (new Date('{{item.return_date}}')).toLocaleString('en-GB');
              </script>
              {% endif %}
                
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="inlineCheckbox1" name="is_approved" value="True" {% if item.is_approved != False %} disabled checked{% endif %}>
                <label class="form-check-label" for="inlineCheckbox1" >Approved</label>
              </div>
              <input name="which_item" value="{{item.id}}" style="display: none;">

              

          </div>
          
          <div class="card-footer text-muted">
            
            {% if item.is_approved == False %} 
            <button type="submit" class="btn btn-primary" name="approveItem">SAVE</button>
            {% else %}

          <button type="submit" name="returnItem"class="btn btn-secondary">Return</button>

            {% endif %}
          </div>
        </form>
        </div>
        {% endif %}
        {% endfor %}
    </div>
    <br><br>
  <div class="card-deck-1">
    
    <div class="card-1">
        
      <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        {% if order.is_approved == 'Declined' %}
        <div class="form-group">
        <input type='text' class="form-control" id='pickup-date' placeholder="Pick-up date" name="pickup_date">
        <script>
          $(function () {
            $('[id=pickup-date]').datetimepicker();
          });
         </script>
        </div>

        {% else %}
        <div class="form-group">
          <input type='text' class="form-control" id='pickupdate' placeholder="Pick-up date" name="pickup_date" disabled>
          <script>
                document.getElementById('pickupdate').placeholder = (new Date('{{order.pickup_date}}')).toLocaleString('en-GB');
          </script>
        </div>

        {% endif %}


        <div class="form-group">
          <textarea class="form-control" rows="1" id="comment" placeholder="Pickup Place" value="{{order.pickup_place}}" name="pick-up-place" {% if order.is_approved != 'Declined' %} disabled {% endif %}>{{order.pickup_place}}</textarea>
        </div>
        <div class="form-group">
          <textarea class="form-control" rows="2" id="comment" placeholder="Description" value="{{order.description}}" name="description"{% if order.is_approved != 'Declined' %} disabled {% endif %}>{{order.description}}</textarea>
        </div>

        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" id="inlineCheckbox1" name="is_approvedorder" value="True" {% if order.is_approved != 'Declined' %} disabled checked{% endif %}>
          <label class="form-check-label" for="inlineCheckbox1">Approved</label>
        </div>
        <br><br>
        {% if order.is_approved == 'Declined' %} 
        <button type="submit" name="approveOrder"class="btn btn-secondary">Save</button>
        <button id='close' type="button" class="btn btn-secondary" onclick="window.open('/modules/smart_inventory/admin/requestlist/','_self')">Cancel</button>
        {% else %}
          <button type="submit" name="returnOrder"class="btn btn-secondary" {% if is_showable == False %} disabled {% endif %}>Done</button>
        {% endif %}

      </form>
    </div>
      
  
  </div>

</body>


</div>
</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.21.0/moment.min.js"></script>
<!-- <script src="{% static 'rai_smartInventory/inventory/app.js' %}"></script> -->

